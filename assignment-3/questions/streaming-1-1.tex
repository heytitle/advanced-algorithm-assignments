% !TEX root = ../main.tex

\section*{Str.I-1}

Suppose a deterministic ALG for ELEMENT UNIQUENESS uses at most $s$ bits of storage. Then $ALG$ can only be in $2^s$ states at any point in time, in particular after processing $m/2$ tokens.

On the other hand, the number of different frequency vector $F[1,...,n]$ where $F[j] = 1$ if an item $j$ exists in the stream otherwise $F[j] = 0$ for all $j \in [n]$, that can be generated by a stream of $m/2$ tokens from [n] is equal to the number of way we put $m/2$ balls into $n$ bins :

\begin{align*}
\dbinom{n}{m/2} \ge \Big( \frac{n}{m/2} \Big)^{m/2} = 2^{m/2\log(2n/m)}
\end{align*}

Hence, when $s < (m/2)\log(2n/m)$, there must be two sequences $\sigma_1 :=  \langle a_1, \dotsc , a_{m/2} \rangle$ and $\sigma{'}_1 := \langle a{'}_1, \dotsc , a{'}_{m/2} \rangle$ whose frequency vectors are different but ALG is in the same state after processing $\sigma_1$ as it would be after processing $\sigma{'}_{1}$. Now consider $\sigma_2 := \langle a_{m/2+1}, \dotsc, a_m \rangle$  which contains an item $j$ in the stream. Such that all items in $\sigma_1 \circ \sigma_2$ are unique, while there is a duplicated item in $\sigma'_1 \circ \sigma_2$. Indeed such a stream exists if we take an item $j \in [n]$ for which $F_{\sigma_{1}}[j] = 0$ and $F_{\sigma'_{1}}[j] = 1$, and all items in $\sigma_2$ are distinct from $\sigma_1$ and $\sigma'_1$ except only $j$. Then $j$ is unique in $\sigma_1 \circ \sigma_2$ but not in $\sigma'_1 \circ \sigma_2$.

Since ALG is deterministic and the state of ALG after processing $\sigma_1$ is the same as it would be after processing $\sigma'_1$, we can conclude that ALG will report the same answer for the $\sigma_1 \circ \sigma_2$ and $\sigma'_1 \circ \sigma_2$. In fact, this is not correct, because $j$ is unique in $\sigma_1 \circ \sigma_2$ but not in $\sigma'_1 \circ \sigma_2$. Hence, any deterministic streaming algorithm that solves ELEMENT UNIQUENESS exactly must use at least $\Omega(m\log(2n/m)$ bits of storage.

